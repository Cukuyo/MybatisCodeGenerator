<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.changhong.ssc.web.dao.LogDao">

	<!-- 可根据自己的需求，是否要使用 -->
	<resultMap type="com.changhong.ssc.web.entity.po.SysLogPo" id="BaseResultMap">
		<result property="id" column="id"/>
		<result property="userId" column="user_id"/>
		<result property="userName" column="user_name"/>
		<result property="ip" column="ip"/>
		<result property="userEmail" column="user_email"/>
		<result property="requestUri" column="request_uri"/>
		<result property="msg" column="msg"/>
		<result property="createDate" column="create_date"/>
		<result property="code" column="code"/>
		<result property="title" column="title"/>
	</resultMap>

	<!--
		  选择性插入
		-->
	<sql id="Base_Insert_Selective">
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="userId != null">
				user_id,
			</if>
			<if test="userName != null">
				user_name,
			</if>
			<if test="ip != null">
				ip,
			</if>
			<if test="userEmail != null">
				user_email,
			</if>
			<if test="requestUri != null">
				request_uri,
			</if>
			<if test="msg != null">
				msg,
			</if>
			<if test="createDate != null">
				create_date,
			</if>
			<if test="code != null">
				code,
			</if>
			<if test="title != null">
				title
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="userId != null">
				#{userId,jdbcType=VARCHAR},
			</if>
			<if test="userName != null">
				#{userName,jdbcType=VARCHAR},
			</if>
			<if test="ip != null">
				#{ip,jdbcType=VARCHAR},
			</if>
			<if test="userEmail != null">
				#{userEmail,jdbcType=VARCHAR},
			</if>
			<if test="requestUri != null">
				#{requestUri,jdbcType=VARCHAR},
			</if>
			<if test="msg != null">
				#{msg,jdbcType=VARCHAR},
			</if>
			<if test="createDate != null">
				#{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="code != null">
				#{code,jdbcType=INTEGER},
			</if>
			<if test="title != null">
				#{title,jdbcType=VARCHAR}
			</if>
		</trim>
	</sql>

	<!--
	  数据库表的基本查询列名集合
	-->
	<sql id="Base_Column_List">
        id, user_id, user_name, ip, user_email, request_uri, msg, create_date, code, title
    </sql>

	<!--
		Where子句
	  -->
	<sql id="Base_Query_Where">
		<if test="id != null">
			and id = #{id,jdbcType=INTEGER}
		</if>
		<if test="userId != null">
			and user_id = #{userId,jdbcType=VARCHAR}
		</if>
		<if test="userName != null">
			and user_name = #{userName,jdbcType=VARCHAR}
		</if>
		<if test="ip != null">
			and ip = #{ip,jdbcType=VARCHAR}
		</if>
		<if test="userEmail != null">
			and user_email = #{userEmail,jdbcType=VARCHAR}
		</if>
		<if test="requestUri != null">
			and request_uri = #{requestUri,jdbcType=VARCHAR}
		</if>
		<if test="msg != null">
			and msg = #{msg,jdbcType=VARCHAR}
		</if>
		<if test="createDate != null">
			and create_date = #{createDate,jdbcType=TIMESTAMP}
		</if>
		<if test="code != null">
			and code = #{code,jdbcType=INTEGER}
		</if>
		<if test="title != null">
			and title = #{title,jdbcType=VARCHAR}
		</if>
	</sql>

	<!--
		基本更新字段
	-->
	<sql id="Base_Update_Column">
		<set>
			<if test="id != null">
				id = #{id,jdbcType=INTEGER},
			</if>
			<if test="userId != null">
				user_id = #{userId,jdbcType=VARCHAR},
			</if>
			<if test="userName != null">
				user_name = #{userName,jdbcType=VARCHAR},
			</if>
			<if test="ip != null">
				ip = #{ip,jdbcType=VARCHAR},
			</if>
			<if test="userEmail != null">
				user_email = #{userEmail,jdbcType=VARCHAR},
			</if>
			<if test="requestUri != null">
				request_uri = #{requestUri,jdbcType=VARCHAR},
			</if>
			<if test="msg != null">
				msg = #{msg,jdbcType=VARCHAR},
			</if>
			<if test="createDate != null">
				create_date = #{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="code != null">
				code = #{code,jdbcType=INTEGER},
			</if>
			<if test="title != null">
				title = #{title,jdbcType=VARCHAR}
			</if>
		</set>
	</sql>

	<!--
	  根据主键查询数据库表
	-->
	<select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List"/>
		from sys_log
		where id = #{id,jdbcType=INTEGER}
	</select>


	<!--
	  根据主键删除数据库表中的记录
	-->
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        delete FROM sys_log
        where id = #{id,jdbcType=INTEGER}
    </delete>

	<!--
	  添加一条记录到数据库表中
	-->
	<insert id="insert" useGeneratedKeys="true" keyProperty="id"
			parameterType="com.changhong.ssc.web.entity.po.SysLogPo">
		insert into sys_log
		(<include refid="Base_Column_List"/>)
		values (
		<if test="id != null">
			#{id,jdbcType=INTEGER},
		</if>
		<if test="userId != null">
			#{userId,jdbcType=VARCHAR},
		</if>
		<if test="userName != null">
			#{userName,jdbcType=VARCHAR},
		</if>
		<if test="ip != null">
			#{ip,jdbcType=VARCHAR},
		</if>
		<if test="userEmail != null">
			#{userEmail,jdbcType=VARCHAR},
		</if>
		<if test="requestUri != null">
			#{requestUri,jdbcType=VARCHAR},
		</if>
		<if test="msg != null">
			#{msg,jdbcType=VARCHAR},
		</if>
		<if test="createDate != null">
			#{createDate,jdbcType=TIMESTAMP},
		</if>
		<if test="code != null">
			#{code,jdbcType=INTEGER},
		</if>
		<if test="title != null">
			#{title,jdbcType=VARCHAR}
		</if>
		)
	</insert>

	<!--
	 有选择的添加一条记录到数据库表中
   -->
	<insert id="insertSelective" useGeneratedKeys="true" keyProperty="id"
			parameterType="com.changhong.ssc.web.entity.po.SysLogPo">
		insert into sys_log
		<include refid="Base_Insert_Selective"/>
	</insert>

	<!--
	  有选择的可忽略添加一条记录到数据库表中
	-->
	<insert id="insertSelectiveIgnore" useGeneratedKeys="true" keyProperty="id"
			parameterType="com.changhong.ssc.web.entity.po.SysLogPo">
		insert ignore into sys_log
		<include refid="Base_Insert_Selective"/>
	</insert>

	<!--
	  根据主键有选择的更新数据库表
	-->
	<update id="updateByPrimaryKeySelective" parameterType="com.changhong.ssc.web.entity.po.SysLogPo">
		update sys_log
		<include refid="Base_Update_Column"></include>
		where id = #{id,jdbcType=INTEGER}
	</update>


	<!--
	  根据主键更新数据库表
	-->
	<update id="updateByPrimaryKey" parameterType="com.changhong.ssc.web.entity.po.SysLogPo">
		update sys_log
		<set>
			<if test="id != null">
				id = #{id,jdbcType=INTEGER},
			</if>
			<if test="userId != null">
				user_id = #{userId,jdbcType=VARCHAR},
			</if>
			<if test="userName != null">
				user_name = #{userName,jdbcType=VARCHAR},
			</if>
			<if test="ip != null">
				ip = #{ip,jdbcType=VARCHAR},
			</if>
			<if test="userEmail != null">
				user_email = #{userEmail,jdbcType=VARCHAR},
			</if>
			<if test="requestUri != null">
				request_uri = #{requestUri,jdbcType=VARCHAR},
			</if>
			<if test="msg != null">
				msg = #{msg,jdbcType=VARCHAR},
			</if>
			<if test="createDate != null">
				create_date = #{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="code != null">
				#{code,jdbcType=INTEGER},
			</if>
			<if test="title != null">
				#{title,jdbcType=VARCHAR}
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>

	<!--
	  批量添加记录到数据库表中
	-->
	<insert id="batchInsert" parameterType="java.util.List">
		insert into sys_log
		<trim prefix="(" suffix=")" suffixOverrides=",">
			id, user_id, user_name, ip, user_email, request_uri, msg, create_date, code, title
		</trim>
		values
		<foreach collection="list" index="index" item="item" separator=",">
			<trim prefix="(" suffix=")" suffixOverrides=",">
				#{item.id,jdbcType=INTEGER}, #{item.userId,jdbcType=VARCHAR}, #{item.userName,jdbcType=VARCHAR},
				#{item.ip,jdbcType=VARCHAR}, #{item.userEmail,jdbcType=VARCHAR}, #{item.requestUri,jdbcType=VARCHAR},
				#{item.msg,jdbcType=VARCHAR}, #{item.createDate,jdbcType=TIMESTAMP}, #{item.code,jdbcType=INTEGER},
				#{item.title,jdbcType=VARCHAR}
			</trim>
		</foreach>
	</insert>

	<!--
	  根据主键批量更新数据库表中的记录
	-->
	<update id="batchUpdate" parameterType="java.util.List">
		<foreach collection="list" index="index" item="item" separator=";">
			update sys_log
			<set>
				<trim suffixOverrides=",">
					<if test="item.id != null">
						id = #{item.id,jdbcType=INTEGER},
					</if>
					<if test="item.userId != null">
						user_id = #{item.userId,jdbcType=VARCHAR},
					</if>
					<if test="item.userName != null">
						user_name = #{item.userName,jdbcType=VARCHAR},
					</if>
					<if test="item.ip != null">
						ip = #{item.ip,jdbcType=VARCHAR},
					</if>
					<if test="item.userEmail != null">
						user_email = #{item.userEmail,jdbcType=VARCHAR},
					</if>
					<if test="item.requestUri != null">
						request_uri = #{item.requestUri,jdbcType=VARCHAR},
					</if>
					<if test="item.msg != null">
						msg = #{item.msg,jdbcType=VARCHAR},
					</if>
					<if test="item.createDate != null">
						create_date = #{item.createDate,jdbcType=TIMESTAMP},
					</if>
					<if test="item.code != null">
						code = #{item.code,jdbcType=INTEGER},
					</if>
					<if test="item.title != null">
						title = #{item.title,jdbcType=VARCHAR}
					</if>
				</trim>
			</set>
			<where>
				<trim suffixOverrides=",">
					where id = #{id,jdbcType=INTEGER}
				</trim>
			</where>
		</foreach>
	</update>

	<!--
	 使用给定的字段名定义Where子句
   -->
	<sql id="Identifiers_Array_Conditions">
		<foreach collection="array" index="index" item="item" separator=" and ">
			<if test="item == 'id'">
				id = #{id,jdbcType=INTEGER}
			</if>
			<if test="item == 'userId'">
				user_id = #{userId,jdbcType=VARCHAR}
			</if>
			<if test="item == 'userName'">
				user_name = #{userName,jdbcType=VARCHAR}
			</if>
			<if test="item == 'ip'">
				ip = #{ip,jdbcType=VARCHAR}
			</if>
			<if test="item == 'userEmail'">
				user_email = #{userEmail,jdbcType=VARCHAR}
			</if>
			<if test="item == 'requestUri'">
				request_uri = #{requestUri,jdbcType=VARCHAR}
			</if>
			<if test="item == 'msg'">
				msg = #{msg,jdbcType=VARCHAR}
			</if>
			<if test="item == 'createDate'">
				create_date = #{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="item == 'code'">
				code = #{code,jdbcType=INTEGER},
			</if>
			<if test="item == 'title'">
				title = #{title,jdbcType=INTEGER}
			</if>
		</foreach>
	</sql>

	<!--
	  存在即更新否则插入
	-->
	<update id="upsert" parameterType="com.changhong.ssc.web.entity.po.SysLogPo">
		insert into sys_log
		<trim prefix="(" suffix=")" suffixOverrides=",">
			id, user_id, user_name, ip, user_email, request_uri, msg, create_date, code, title
		</trim>
		values
		<trim prefix="(" suffix=")" suffixOverrides=",">
			#{id,jdbcType=INTEGER}, #{userId,jdbcType=VARCHAR}, #{userName,jdbcType=VARCHAR}, #{ip,jdbcType=VARCHAR},
			#{userEmail,jdbcType=VARCHAR}, #{requestUri,jdbcType=VARCHAR}, #{msg,jdbcType=VARCHAR},
			#{createDate,jdbcType=TIMESTAMP}, #{code,jdbcType=INTEGER}, #{title,jdbcType=VARCHAR}
		</trim>
		on duplicate key update
		<trim suffixOverrides=",">
			#{id,jdbcType=INTEGER}, #{userId,jdbcType=VARCHAR}, #{userName,jdbcType=VARCHAR}, #{ip,jdbcType=VARCHAR},
			#{userEmail,jdbcType=VARCHAR}, #{requestUri,jdbcType=VARCHAR}, #{msg,jdbcType=VARCHAR},
			#{createDate,jdbcType=TIMESTAMP}, #{code,jdbcType=INTEGER}, #{title,jdbcType=VARCHAR}
		</trim>
	</update>


	<!--
	  带有空值检查的存在即更新否则插入
	-->
	<update id="upsertSelective" parameterType="com.changhong.ssc.web.entity.po.SysLogPo">
		insert into sys_log
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id !=null ">
				id,
			</if>
			<if test="userId !=null ">
				user_id,
			</if>
			<if test="userName !=null ">
				user_name,
			</if>
			<if test="ip !=null ">
				ip,
			</if>
			<if test="userEmail !=null ">
				user_email,
			</if>
			<if test="requestUri !=null ">
				request_uri,
			</if>
			<if test="msg !=null ">
				msg,
			</if>
			<if test="createDate !=null ">
				create_date,
			</if>
			<if test="code !=null ">
				code,
			</if>
			<if test="title !=null ">
				title
			</if>
		</trim>
		values
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id !=null ">
				id = #{id,jdbcType=INTEGER},
			</if>
			<if test="userId !=null ">
				user_id = #{userId,jdbcType=VARCHAR},
			</if>
			<if test="userName !=null ">
				user_name = #{userName,jdbcType=VARCHAR},
			</if>
			<if test="ip !=null ">
				ip = #{ip,jdbcType=VARCHAR},
			</if>
			<if test="userEmail !=null ">
				user_email = #{userEmail,jdbcType=VARCHAR},
			</if>
			<if test="requestUri !=null ">
				request_uri = #{requestUri,jdbcType=VARCHAR},
			</if>
			<if test="msg !=null ">
				msg = #{msg,jdbcType=VARCHAR},
			</if>
			<if test="createDate !=null ">
				create_date = #{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="code !=null ">
				code = #{code,jdbcType=INTEGER},
			</if>
			<if test="title !=null ">
				title = #{title,jdbcType=VARCHAR}
			</if>
		</trim>
		on duplicate key update
		<trim suffixOverrides=",">
			<if test="id !=null ">
				id = #{id,jdbcType=INTEGER},
			</if>
			<if test="userId !=null ">
				user_id = #{userId,jdbcType=VARCHAR},
			</if>
			<if test="userName !=null ">
				user_name = #{userName,jdbcType=VARCHAR},
			</if>
			<if test="ip !=null ">
				ip = #{ip,jdbcType=VARCHAR},
			</if>
			<if test="userEmail !=null ">
				user_email = #{userEmail,jdbcType=VARCHAR},
			</if>
			<if test="requestUri !=null ">
				request_uri = #{requestUri,jdbcType=VARCHAR},
			</if>
			<if test="msg !=null ">
				msg = #{msg,jdbcType=VARCHAR},
			</if>
			<if test="createDate !=null ">
				create_date = #{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="code !=null ">
				code = #{code,jdbcType=INTEGER},
			</if>
			<if test="title !=null ">
				title = #{title,jdbcType=VARCHAR}
			</if>
		</trim>
	</update>

	<select id="query" resultMap="BaseResultMap" parameterType="com.changhong.ssc.web.entity.po.SysLogPo">
		select
		<include refid="Base_Column_List"/>
		from sys_log
		<where>
			<include refid="Base_Query_Where"></include>
		</where>
	</select>

	<select id="queryTotal" resultType="long">
        select count(*) from sys_log
    </select>


	<delete id="deleteBatch">
		delete from sys_log where id in
		<foreach item="id" collection="list" open="(" separator="," close=")">
			#{id}
		</foreach>
	</delete>

	<select id="queryWithParams" resultType="com.changhong.ssc.web.entity.vo.LogListItemVo">
		select
		user_name as userName, ip, user_email as userEmail, request_uri as requestUri, msg, create_date as
		createDate,title
		from sys_log
		<where>
			<if test="beginDate !=null">
				and create_date &gt; #{beginDate,jdbcType=TIMESTAMP}
			</if>
			<if test="endDate !=null">
				and create_date &lt; #{endDate,jdbcType=TIMESTAMP}
			</if>
			<if test="code !=null">
				and code = #{code,jdbcType=INTEGER}
			</if>
			<if test="loginName !=null">
				and user_email = #{loginName,jdbcType=VARCHAR}
			</if>
			<if test="title !=null">
				and title = #{title,jdbcType=VARCHAR}
			</if>
		</where>
		order by id DESC
		<if test="download ==true">
			limit 10000
		</if>
	</select>

</mapper>